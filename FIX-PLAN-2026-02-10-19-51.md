# Kanban Board Fixes - 2026-02-10 19:51 MST

## Issues Reported by Brian:
1. Error at the bottom
2. No search functionality
3. Cards don't show descriptions

## Root Cause Analysis:

### Issue 1: Sync Error (Console)
**Error:** `Sync failed: SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON`  
**Location:** Lines 4062-4063, 4754-4755 in index.html  
**Root Cause:** Code tries to sync to `.netlify/functions/kanban-storage` but we're on Cloudflare Pages (no Netlify functions)

### Issue 2: No Search
**Location:** Line 1788 `<div class="filter-bar" id="filterBar"></div>`  
**Root Cause:** Empty div - search/filter functionality never implemented

### Issue 3: Descriptions Invisible
**Location:** Lines 550-556 (CSS), 4057 (HTML template)  
**Root Cause:** Descriptions ARE rendered but hidden by CSS `-webkit-line-clamp: 2` which limits to 2 lines
**Evidence:** Snapshot shows full descriptions in accessibility tree but not visible in viewport

## 5-Approach Fix Strategy:

### Approach 1: Console Error Diagnostics
- Use browser DevTools to trace exact error source
- Follow call stack to identify failing function
- Test with network tab to see failed requests
- ✅ COMPLETED: Identified `.netlify/functions/kanban-storage` 405 error

### Approach 2: Code Search & Pattern Matching
- grep for "netlify/functions" to find all sync code
- Search for "filterBar" to find where filters should populate
- Search for "line-clamp" to find description truncation
- ✅ COMPLETED: Found sync code, empty filterBar, line-clamp CSS

### Approach 3: Visual Regression Testing (Playwright)
- Take "before" screenshot
- Apply fixes
- Take "after" screenshot  
- Compare to ensure:
  - No console errors
  - Search bar visible
  - Descriptions visible
- ✅ READY TO EXECUTE

### Approach 4: Git History Comparison
- Check when sync code was added
- See if search was ever implemented
- Find if descriptions worked before
- ✅ COMPLETED: daaada9 commit had working board, c2bd11e broke it

### Approach 5: User Acceptance Testing
- Deploy fix to staging
- Test on mobile (Brian's primary device)
- Verify all 3 issues resolved
- Get Brian's approval before production
- ✅ READY TO EXECUTE

## Fixes to Apply:

### Fix 1: Remove Netlify Sync Code
**Lines to modify:** 4032-4098 (syncToCloud function)
**Solution:** Remove or comment out Netlify-specific sync, keep localStorage only

### Fix 2: Add Search Bar
**Line to modify:** 1788 (empty filterBar div)
**Solution:** Add search input with real-time filtering
```html
<input type="search" id="searchInput" placeholder="Search cards..." />
```
**JS to add:** Filter cards array by title/description on keyup

### Fix 3: Show More Description Text
**Lines to modify:** 550-556 (card-desc CSS)
**Options:**
A. Increase line-clamp from 2 to 3-4 lines
B. Remove line-clamp entirely (full description)
C. Add "Read more" expand button
D. Show description on hover tooltip
**Chosen:** Increase to 3 lines + add hover tooltip for full text

## Implementation Order:
1. Fix sync error (highest priority - breaks console)
2. Add search bar (user-facing feature)
3. Improve description visibility (UX enhancement)

## Testing Checklist:
- [ ] No console errors
- [ ] Search filters cards correctly
- [ ] Descriptions visible (3 lines)
- [ ] Hover shows full description
- [ ] Mobile responsive
- [ ] Data persists (localStorage)
- [ ] Drag-and-drop still works
- [ ] All 107 cards render correctly

## Deployment:
1. Test locally with `python3 -m http.server 8000`
2. Deploy to Cloudflare Pages via API
3. Screenshot proof to Telegram
4. Get Brian's approval

**Status:** Ready to implement fixes
**ETA:** 15-20 minutes
